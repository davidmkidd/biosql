Here's a rough walk-through.

0) If you instantiated this schema before in the pre-Singapore version
   and you would like to upgrade (migrate) your schema, possibly
   without losing data, follow item 1) below and afterwards skip to
   migrate/singapore/migrate-to-singapore.sql. Carefully read the
   disclaimer in that file, and follow the backup instructions (note
   that having a backup is no guarantee for also being able to restore
   it, so make sure you can unless you can afford to lose all data in
   the schema in the worst case). Run the script and see whether you
   get an error:

	SQL> @migrate/singapore/migrate-to-singapore

   If there is an error saying that BS-defs-local.sql wasn't found,
   fix that error by editing the path or following item 1) below as I
   said you should. Once there is no error anymore, edit the
   migrate-to-singapore.sql script to comment out the line containing
   the word exit all by itself (you may want to comment out the
   preceding PROMPT statements too). Then run the script again like
   above. Cross your fingers. To limit the damage in case of errors
   the script will exit upon the first error it encounters. Depending
   on your volume of data that you have in your Biosql instance, the
   entire migration may take a while. I had 8 Mio bioentries and the
   whole migration took several hours. You will want to make sure that
   nobody will change data while the schema is being migrated.

   BTW the migration script did work for me without any error (well,
   finally). There is a chance it will for you too.

Now for those who instantiate Biosql from scratch.

1) Copy BS-defs.sql to BS-defs-local.sql. Then edit the latter to make
   sure the settings reflect what you want.

2) BS-create-all.sql is the overall build script. Make sure only those
   commands are commented out that you know you don't want to happen
   (e.g., you may have the tablespaces already, so skip that). Note
   that the default version may have commands commented out that you
   may actually want to run. When finished editing it, run it:

	SQL> @BS-create-all

   Currently this will leave certain objects as invalid, because they
   depend on SG_Chr_Map_Assocs, which is only created in the warehouse
   script.

3) Creation of the warehouse components and the context indexes is not
   yet included in the overall build script. In order to enable that,
   you need to

	SQL> @BS-create-warehouse
	SQL> @BS-create-ctx  -- read the comments to check your settings

   After issuing the first command SG_Chr_Map_Assocs should be
   present. Also, there should be no objects anymore which don't
   compile. If there still are, send email to biosql-l@open-bio.org.

4) To create the Biosql API used by the Oracle driver in bioperl-db,
   run BS-create-Biosql-API.sql:

	SQL> @BS-create-Biosql-API

   Bioperl-db will *not* work without running this command. The schema
   will, though.

5) I strongly recommend to create one or more separate users under
   which to load (and retrieve data), rather than using the schema
   owner. Because the aforementioned Biosql-API is not public (I chose
   that to limit cluttering of the public namespace), every user who
   wants to use the API needs to establish synonyms. There is a script
   BS-create-Biosql-usersyns.sql which creates a script usersyns.sql,
   which is then to be run under every user who wants to use the API,
   for instance the user biosql. I.e.,

	SQL> @BS-create-Biosql-usersyns
	SQL> connect biosql/biosqlpwd -- or whatever your usr/pwd is
	SQL> @usersyns

6) I also recommend to create a bare-bones test schema under a
   different schema owner specifically for the bioperl-db test suite
   (or any other Bio* test suite for that matter), using a trimmed
   down version of BS-create-all.sql. For those object-relational
   adaptors to work you don't need the warehouse, nor the context
   indexes, nor the PL/SQL API. All that is needed is the schema (in
   BS-DDL.sql) and the biosql API (in BS-create-Biosql-API.sql). Be
   careful to comment out the creation of roles, grants, and
   specifically synonyms in BS-create-all when instantiating the test
   schema.

7) You should be set now. If there are invalid objects or you
   encounter other problems with the schema, send email to
   biosql-l@open-bio.org.

Hilmar

